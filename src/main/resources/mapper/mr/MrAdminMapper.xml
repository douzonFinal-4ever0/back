<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kosa.resq.mapper.mr.MrAdminMapper">
    <select id="mrList">
        select *
        from mr
    </select>

    <resultMap id="mrMap" type="com.kosa.resq.domain.vo.mr.MrResponseVO">
        <id property="mr_code" column="mr_code"/>
        <result property="mr_name" column="mr_name"/>
        <result property="maximum_capacity" column="maximum_capacity"/>
        <result property="location" column="location"/>
        <result property="avl_start_time" column="avl_start_time"/>
        <result property="avl_end_time" column="avl_end_time"/>
        <result property="is_opened" column="is_opened"/>
        <result property="is_used" column="is_used"/>
        <result property="mr_type" column="mr_type"/>
        <result property="created_at" column="created_at"/>
        <result property="updated_at" column="updated_at"/>
        <result property="deleted_at" column="deleted_at"/>
        <collection property="mr_keyword" resultMap="mr_keywordMap"/>
        <collection property="mr_img" resultMap="mr_imgMap"/>
        <collection property="mr_op_day" resultMap="mr_op_dayMap"/>
    </resultMap>
    <resultMap id="mr_keywordMap" type="com.kosa.resq.domain.dto.mr.MrKeyWordDTO">
        <id property="keyword_code" column="keyword_code"/>
        <result property="keyword_name" column="keyword_name"/>
    </resultMap>
    <resultMap id="mr_imgMap" type="com.kosa.resq.domain.dto.mr.MrImgDTO">
        <id property="img_code" column="img_code"/>
        <result property="url" column="url"/>
    </resultMap>
    <resultMap id="mr_op_dayMap" type="com.kosa.resq.domain.dto.mr.MrOpDayDTO">
        <id property="op_day_code" column="op_day_code"/>
        <result property="day" column="day"/>
    </resultMap>
    <resultMap id="mr_rezMap" type="com.kosa.resq.domain.dto.mr.MrRezDTO">
        <id property="mr_rez_code" column="mr_rez_code"/>
        <result property="rez_start_time" column="rez_start_time"/>
        <result property="rez_end_time" column="rez_end_time"/>
        <result property="created_at" column="created_at"/>
        <result property="updated_at" column="updated_at"/>
        <result property="deleted_at" column="deleted_at"/>
        <result property="rez_status" column="rez_status"/>
        <result property="m_purpose" column="m_purpose"/>
        <result property="m_type" column="m_type"/>
        <result property="is_confirmed" column="is_confirmed"/>
        <result property="rez_type" column="rez_type"/>
        <collection property="mr" resultMap="mrMap"/>
    </resultMap>

    <select id="test" resultType="com.kosa.resq.domain.vo.mr.MrResponseVO" resultMap="mrMap">
        <![CDATA[
        select * from MR m left outer join MR_KEYWORD mk on m.MR_CODE = mk.MR_CODE
            left outer join MR_IMG mi on m.MR_CODE = mi.MR_CODE
            left outer join MR_OP_DAY mop on m.MR_CODE = mop.MR_CODE
        ]]>
    </select>

    <select id="test2" resultType="com.kosa.resq.domain.dto.mr.MrRezDTO" resultMap="mr_rezMap">
        select *
        from MR_REZ mrz left outer join MR mr on mrz.MR_CODE = mr.MR_CODE
    </select>

</mapper>
